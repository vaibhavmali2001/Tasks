package com.app.controller;

import java.util.HashMap;
import java.util.Map;

import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@CrossOrigin
@RequestMapping("/counter")
public class CounterController {
    
    @PostMapping("/find")
    public Map<String, Integer> countAll(@RequestBody String input) {
        if (input == null) {
            throw new IllegalArgumentException("Input cannot be null");
        }
        
        int alphabets = 0;
        int digits = 0;
        int symbols = 0;
        
        // Counting using regular expressions
        alphabets = input.replaceAll("[^a-zA-Z]", "").length();
        digits = input.replaceAll("\\D", "").length();
        symbols = input.length() - alphabets - digits;
        
        Map<String, Integer> counts = new HashMap<>();
        counts.put("alphabets", alphabets);
        counts.put("digits", digits);
        counts.put("symbols", symbols);
        
        return counts;
    }
}
