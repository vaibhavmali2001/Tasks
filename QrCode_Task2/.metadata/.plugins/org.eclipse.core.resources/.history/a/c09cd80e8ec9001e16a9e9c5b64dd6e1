package com.app.Service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.app.Entity.QRCode;
import com.app.Repo.QrRepo;

import jakarta.transaction.Transactional;

@Service
public class QrServiceImpl implements QrService{
	
	@Autowired
	private QrRepo qrRepo;

	   @Transactional
	    public QRCode generateAndSaveQRCode(String text) {
	        try {
	            // Generate QR code bytes
	            byte[] qrCodeBytes = generateQRCodeBytes(text);

	            // Save QR code entity
	            QRCode qrCode = new QRCode();
	            qrCode.setText(text);
	            qrCode.setQrCode(qrCodeBytes);
	            return qrRepo.save(qrCode);
	        } catch (Exception e) {
	            e.printStackTrace();
	            return null;
	        }
	    }


	
	
	
}
